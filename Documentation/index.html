<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Construct: Construct</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_dark.png"/></td>
  <td id="projectalign">
   <div id="projectname">Construct<span id="projectnumber">&#160;version 5.2.2</span>
   </div>
   <div id="projectbrief">An agent based modeling framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Liscensed by the Center for Computational Analysis of Social and Organizational Systems (CASOS). For academic use only. For commerical use contact CASOS.</p>
<p >Current Primary Author: Stephen Dipple</p>
<p >Supporting Authors: Michael Kowalchuck and Neal Altman</p>
<p >Last Updated: 01/19/22</p>
<h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p >Welcome to the Construct Model Guide. <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> is an agent based modeling software framework. Many models have been created using this framework. This guide's aim is to expain all the tools that <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> offers to create your own models.</p>
<p >Some of the reasons to use <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>'s framework are simplified input, ouput, data storage, and cross model interaction. <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> comes prebuilt with the ability to parse DynetML and CSV files as well as the ability to output them to those formats. The <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a> data structure will allow for both easy iteration through elements and memory efficient data storage. Finally the <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> class facilitates communication between models. This communication can come in the form of direct interaction via the <a class="el" href="class_model_manager.html" title="Container for Construct models.">ModelManager</a>, indirect interaction through the <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>s as they are shared between all models, or passive interaction via the <a class="el" href="class_interaction_message_queue.html" title="An InteractionMessageQueue is a container of InteractionMessages using a list.">InteractionMessageQueue</a>.</p>
<p >In the following sections, I'll be going over these concepts which will allow a user to create their own models. This guide assumes that the user already has good knowledge of how to format input xml files for <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>. This guide will also assume the user has a basic knowledge of c++ programming, including standard library data structures, iterators, and pointers.</p>
<h1><a class="anchor" id="hello_world"></a>
Creating a Model</h1>
<p >An example model has been created with the neccessary components to allow users to out of the gate begin working. The Template.h and Template.cpp files contain the model "Template Model". All models inheriet from the <a class="el" href="class_model.html" title="Parent class for Construct models.">Model</a> class. Not only is this useful for storing all the active models, but the models inheriet the <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>, <a class="el" href="class_nodeset_manager.html" title="A container for nodesets.">NodesetManager</a>, <a class="el" href="class_graph_manager.html" title="Manages all graphs in Construct.">GraphManager</a>, and <a class="el" href="class_random.html" title="Manages all random number generation in Construct.">Random</a> pointers. The constructor of a model is required to have a specific form, but all other member functions are optional and default back to the <a class="el" href="class_model.html" title="Parent class for Construct models.">Model</a> implementation of those functions. When setting verbose runtime equal to true in the input xml file, a message will appear when a model's function has not been implemented. The functions include initialize, think, update, communicate, and clean_up. These functions take no arguments and return no values except communicate which takes a <a class="el" href="class_interaction_message_queue.html" title="An InteractionMessageQueue is a container of InteractionMessages using a list.">InteractionMessageQueue</a> iterator. The construct takes the <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> pointer, the list of parameters, and the model's name. Of these the <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> pointer and model's name is passed to the <a class="el" href="class_model.html" title="Parent class for Construct models.">Model</a> constructor. All the names of <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>'s libarary of models is contained in the <a class="el" href="namespacemodel__names.html" title="Names of all models in Construct&#39;s model library.">model_names</a> namespace.</p>
<p >A block in the constructor for the <a class="el" href="class_template.html" title="Template for building new Construct models.">Template</a> model has been provided that isn't compiled, but gives plenty of examples of using <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> in the model. From here can do some basic operations like "std::cout &lt;&lt; "Hello World" &lt;&lt; std::endl;" and execute it by include the "Template Model" in the input XML's models list. After moving on from the toy model, you can create your own model by doing the following steps:</p><ol type="1">
<li>Copy and rename the header and implementation file</li>
<li>Change the header guards for the header file</li>
<li>Rename (do not refactor) the class name in both the header and implementation file</li>
<li>include the newly created header in <a class="el" href="_model_manager_8h_source.html">src/Managers/ModelManager.h</a></li>
<li>add your new class to the private function ModelManager::create_model with the appropriate else if statement for your model's constructor.</li>
</ol>
<h1><a class="anchor" id="nodes_graphs"></a>
Nodes and Graphs</h1>
<p >As <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> is a framework for network agent based models, it is important to learn to use nodes and graphs. With your newly created model, you have access to the <a class="el" href="class_nodeset_manager.html" title="A container for nodesets.">NodesetManager</a> (ns_manager) and the <a class="el" href="class_graph_manager.html" title="Manages all graphs in Construct.">GraphManager</a> (graph_manager). <a class="el" href="class_node.html" title="Nodes are any type of entity with or without attributes.">Node</a>s are static objects once created by the <a class="el" href="class_nodeset_manager.html" title="A container for nodesets.">NodesetManager</a>. Models are not able to modify them. You can get a <a class="el" href="class_nodeset.html" title="A container for nodes.">Nodeset</a> by using ns_manager-&gt;get_nodeset(ns_name). You can then either get a <a class="el" href="class_node.html" title="Nodes are any type of entity with or without attributes.">Node</a> by using its index or by its name. Each node has a name, index, and a set of attributes represented in a <a class="el" href="namespacedynet.html#a34559dfdfab68c9dd4735fbea126387b" title="Defining this as a string to string map.">dynet::ParameterMap</a>. Nodesets are shared amongst all models.</p>
<p ><a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>s are also shared amongst models. You can access a graph in one of three ways, <a class="el" href="class_graph_manager.html#a80d82ac30ef23ad0d10746fa882fc728" title="Sets the submitted pointer to the requested 3d graph.">GraphManager::hard_load</a>, <a class="el" href="class_graph_manager.html#a42a1216b8b7716c72fb3592c5748f4c0" title="Similar behavior to hard_load">GraphManager::soft_load</a>, and <a class="el" href="class_graph_manager.html#a558c5c02acc4b6165954c4be19c40507" title="Adds a Graph with the submitted parameters if the requested Graph can not be found.">GraphManager::add_network</a> (<a class="el" href="class_graph_manager.html#af49f9d7ca889e5997f2cce828ad3adc8" title="Adds a Graph with the submitted parameters if the requested Graph can not be found.">GraphManager::add_3dnetwork</a> for 3d graphs). In a hard load, the graph is checked to ensure it has the correct source, target, and slice dimensions. These corresponds to the dimensions of the data structure with source being rows, target being columns, and slice being the potential 3rd dimension. Graphs must be passed by reference to this type of load so that a data type can be inferred and matched with the stored graph's edge type. If the graph is not already loaded into the <a class="el" href="class_graph_manager.html" title="Manages all graphs in Construct.">GraphManager</a> or any of the checks fail, a string exception is thrown. This exception is wrapped by <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a> and is passed to the main function to display the problem to end user. More information will follow on exception handling.</p>
<p >The soft load will preform the same checks as a hard load, but instead of throwing exception if the graph is not already loaded, the passed graph is set to the NULL pointer. The add network and add 3d network will preform a soft load for the passed graph name. If the graph is found, they return a pointer to the graph. Otherwise, a new graph is created using the submitted parameters and that graph is returned.</p>
<p >Graphs are specialized based on the dimension densities. If both dimensions are dense, an array is used. If both are sparse, a binary tree is instead used. The use of <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>'s functions do not change in terms of result based on the dimension representation, but memory and cpu performance will. <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a> has a host of iterators to minimize cpu usage when dimensions are sparse and are recommended to be used whenever possible.</p>
<p >Because a binary tree is used for the sparse representation, not all network elements will be stored in memory as an entry. Due to this, if a <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a> element is accessed by any means and it does not have an entry stored in memory, the <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>'s default value will be returned. This default value can be any value valid for that data type so it is best not to assume a default value when implementing operations on a <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>. The <a class="el" href="class_graph.html#ae273f9fe0787d9140d32390db44513a0" title="Gets a reference to the specified link value.">Graph::at</a> functions come with an overload that automatically detects if the new value of an element is being set to the default value (see <a class="el" href="class_graph.html#a03f20d992e0af999c8aea5bbd634a8ba" title="Takes a values and either sets the entry to that value or removes the entry if the submitted value is...">Graph::at(unsigned int, unsigned int, const T&amp;)</a>). If the passed value does not equal to the default value, it will use the complement <a class="el" href="class_graph.html#ae273f9fe0787d9140d32390db44513a0" title="Gets a reference to the specified link value.">Graph::at</a> function to set the element. Otherwise, the entry in memory is removed.</p>
<h1><a class="anchor" id="messages"></a>
Exchanging Messages</h1>
<p ><a class="el" href="class_interaction_message.html" title="An Interaction Message is a container for InteractionItems. In addition a message has a sender,...">InteractionMessage</a>s can be added to <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>'s private message queue which are dispersed to models for parsing in the <a class="el" href="class_model.html#a748b7e82f3b9f3b0b73420de95464afc" title="Function called after the update functions in a simulation cycle.">Model::communicate</a> function. This message collection and dispersion offers a significantly different interaction between models compared to the sharing of data structures such as <a class="el" href="class_graph.html" title="Data structure for storing graphs/networks.">Graph</a>s. Messages are created independently in the <a class="el" href="class_model.html#a0cafb45d68b3acf52e69a7fda96daad1" title="First function called in a simulation cycle.">Model::think</a> function. These messages are then amended, deleted, or cause other messages to be created in the <a class="el" href="class_model.html#a61a7f0b5d516825ac2876fc48c0430c3" title="Function called after the think functions in a simulation cycle.">Model::update</a> function. Finally all messages added to <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>' private message queue are dispersed one by one in the <a class="el" href="class_model.html#a748b7e82f3b9f3b0b73420de95464afc" title="Function called after the update functions in a simulation cycle.">Model::communicate</a> function. These are all rules that <a class="el" href="class_construct.html" title="The API class that coordinates the transfer of information between classes.">Construct</a>'s library of models follow, but is not a strict requirement of any supplimentary models created by interested developers.</p>
<p >Messages contain a sender and receiver index which correspond the indexes of agent nodes. Messages also contain a <a class="el" href="struct_communication_medium.html" title="Class to contain the medium used by InteractionMessage% s.">CommunicationMedium</a>. This medium is used in determining how the message is parsed. The actual content of the message is contained in the vector of <a class="el" href="struct_interaction_item.html" title="Interaction Items is a container of three maps. Each map corresponds to a different datatype.">InteractionItem</a>s.</p>
<p >Each <a class="el" href="struct_interaction_item.html" title="Interaction Items is a container of three maps. Each map corresponds to a different datatype.">InteractionItem</a> in a message has a set of attributes, indexes, and values which are made public to developers. However to shortcut the creation and parsing of common items, various member function are typically used to keep formatting consistent. The functions assigned a unique attribute to ensure an item is only parsed in a specific way. For instance a knowledge item has the "knowledge" key added to the set of attributes. Then the items requires the associated indexes and values for that type of item. In the case of a knowledge item, a knowledge index is required. This information can found in the various member functions of <a class="el" href="struct_interaction_item.html" title="Interaction Items is a container of three maps. Each map corresponds to a different datatype.">InteractionItem</a>.</p>
<h1><a class="anchor" id="thought"></a>
Final Thoughts</h1>
<p >Much effort has been made to allow for as much customization as possible for future models while maintaining predictable behaviour for existing models and minizing the amount of upfront information that must be absorbed to use this software. Some more advanced techniques would be to have a model inheriet from an already existing model that has many of the same behaviour. This is done often with the Standard Interaction <a class="el" href="class_model.html" title="Parent class for Construct models.">Model</a>. Models can use the pointer provided by the <a class="el" href="class_model_manager.html" title="Container for Construct models.">ModelManager</a> to directly interact with other models such as the <a class="el" href="class_location.html" title="A model which allows agents to learn information based on their current location.">Location</a> model. The order of the model member function calling can be manipulated. In addition, it is important to ensure that things like knowledge items are only parsed once. This saves on computation time and memory space and is handled by an independent model <a class="el" href="class_knowledge_parsing.html" title="Model that parses the knowledge in messages.">KnowledgeParsing</a>. This model is created and added to the model list by the Standard Interaction Model, Social_Media Model, and Location Model.</p>
<p >This work is constantly evovling and as such errors in the revision and implementation process do occur. If a typo, an error in the code, or an unknown exception is found, please send the relevant information on to the <a href="https://groups.google.com/g/ORA-google-group">ORA Google Group</a>. For an unknown exception, please include the input xml file and all terminal output. Suggestions and critiques are also welcome to improve clarity and sussinctness of the software.</p>
<p >Thank you and enjoy! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
